<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banner Image URL Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .test-image { max-width: 300px; max-height: 200px; border: 2px solid #ddd; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>üß™ Banner Image URL Test</h1>
    
    <div class="test-section">
        <h2>Test Image URLs</h2>
        <p>This page helps test if banner images are accessible from the server.</p>
        
        <div id="test-results"></div>
        
        <h3>Manual URL Tests:</h3>
        <p>Try these URLs directly in your browser:</p>
        <ul>
            <li><a href="http://localhost:8080/uploads/banners/" target="_blank">http://localhost:8080/uploads/banners/</a> (should show directory listing or 404)</li>
            <li><a href="http://localhost:8080/api/health" target="_blank">http://localhost:8080/api/health</a> (should show server health)</li>
        </ul>
    </div>

    <script>
        // Test image URL construction
        function testImageUrl(imagePath) {
            const baseUrl = 'http://localhost:8080';
            
            if (!imagePath || imagePath.trim() === '') {
                return '';
            }

            // If it's already a full URL, return as is
            if (imagePath.startsWith('http://') || imagePath.startsWith('https://')) {
                return imagePath;
            }

            // If it starts with /uploads, it's a proper server path
            if (imagePath.startsWith('/uploads/')) {
                return `${baseUrl}${imagePath}`;
            }

            // If it starts with uploads/ (without leading slash), add the slash
            if (imagePath.startsWith('uploads/')) {
                return `${baseUrl}/${imagePath}`;
            }

            // If it's just a filename, assume it's in the banners folder
            if (!imagePath.includes('/')) {
                return `${baseUrl}/uploads/banners/${imagePath}`;
            }

            // Otherwise, treat it as a relative path from the server root
            return `${baseUrl}/${imagePath.startsWith('/') ? imagePath.substring(1) : imagePath}`;
        }

        // Test different image path formats
        const testPaths = [
            '/uploads/banners/test-image.jpg',
            'uploads/banners/test-image.jpg',
            'test-image.jpg',
            'http://localhost:8080/uploads/banners/test-image.jpg',
            '',
            null
        ];

        const resultsDiv = document.getElementById('test-results');
        
        testPaths.forEach(path => {
            const result = testImageUrl(path);
            const div = document.createElement('div');
            div.innerHTML = `
                <strong>Input:</strong> ${path || 'null'}<br>
                <strong>Output:</strong> ${result}<br>
                <strong>Test:</strong> <a href="${result}" target="_blank">${result}</a><br><br>
            `;
            resultsDiv.appendChild(div);
        });

        // Test server connectivity
        fetch('http://localhost:8080/api/health')
            .then(response => response.json())
            .then(data => {
                const div = document.createElement('div');
                div.className = 'success';
                div.innerHTML = `‚úÖ Server is running and accessible!`;
                resultsDiv.appendChild(div);
            })
            .catch(error => {
                const div = document.createElement('div');
                div.className = 'error';
                div.innerHTML = `‚ùå Server connection failed: ${error.message}`;
                resultsDiv.appendChild(div);
            });
    </script>
</body>
</html>